var portfolio = [
  {
    thumb: "img/portfolio/thumbs/campaign/Edge8.jpg",
    lightbox: ["img/portfolio/campaign/Edge8/Edge8-03.jpg", "img/portfolio/campaign/Edge8/Edge8-04.jpg", "img/portfolio/campaign/Edge8/Edge8-05.jpg", "img/portfolio/campaign/Edge8/Edge8-06.jpg", "img/portfolio/campaign/Edge8/Edge8-07.jpg", "img/portfolio/campaign/Edge8/Edge8-08.jpg", "img/portfolio/campaign/Edge8/Edge8-09.jpg", "img/portfolio/campaign/Edge8/Edge8-10.jpg", "img/portfolio/campaign/Edge8/Edge8-11.jpg"],
    title: "EDGE8",
    caption: "",
    kind: "Campaign"
  },

  {
    thumb: "img/portfolio/thumbs/misc/BICSI2020.jpg",
    lightbox: ["img/portfolio/misc/BICSI2020/BICSI2020-06.jpg", "img/portfolio/misc/BICSI2020/BICSI2020-07.jpg", "img/portfolio/misc/BICSI2020/BICSI2020-08.jpg", "img/portfolio/misc/BICSI2020/BICSI2020-09.jpg", "img/portfolio/misc/BICSI2020/BICSI2020-10.jpg", "img/portfolio/misc/BICSI2020/BICSI2020-11.jpg"],
    title: "BICSI 2020",
    caption: "",
    kind: "Misc"
  },

  {
    thumb: "img/portfolio/thumbs/print/CoreProducts2016.jpg",
    lightbox: ["img/portfolio/print/CoreProducts2016/CoreProducts2016-07.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-08.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-09.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-10.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-11.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-12.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-13.jpg", "img/portfolio/print/CoreProducts2016/CoreProducts2016-14.jpg"],
    title: "2016 Core Products Catalog",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/develop/MarketoLP.jpg",
    lightbox: ["img/portfolio/develop/MarketoLP/MarketoLP-13.jpg", "img/portfolio/develop/MarketoLP/MarketoLP-14.jpg", "img/portfolio/develop/MarketoLP/MarketoLP-15.gif", "img/portfolio/develop/MarketoLP/MarketoLP-16.jpg", "img/portfolio/develop/MarketoLP/MarketoLP-17.jpg"],
    title: "Landing Page Template",
    caption: "",
    kind: "Develop"
  },

  {
    thumb: "img/portfolio/thumbs/develop/LobbyMonitors.jpg",
    lightbox: ["img/portfolio/develop/LobbyMonitors/LobbyMonitors-23.jpg", "img/portfolio/develop/LobbyMonitors/LobbyMonitors-24.jpg", "img/portfolio/develop/LobbyMonitors/LobbyMonitors-25.jpg", "img/portfolio/develop/LobbyMonitors/LobbyMonitors-26.jpg", "img/portfolio/develop/LobbyMonitors/LobbyMonitors-27.jpg"],
    title: "Lobby Monitors",
    caption: "",
    kind: "Develop"
  },

  {
    thumb: "img/portfolio/thumbs/print/CPICableMngtBro.jpg",
    lightbox: ["img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-23.jpg", "img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-24.jpg", "img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-25.jpg", "img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-26.jpg", "img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-27.jpg", "img/portfolio/print/CableManagement&TrayBro/CableManagement&TrayBro-28.jpg"],
    title: "CPI Cable Management, Runway & Tray  Solutions Brochure",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/campaign/ProjectSignature.jpg",
    lightbox: ["img/portfolio/campaign/ProjectSignature/ProjectSignature-12.jpg", "img/portfolio/campaign/ProjectSignature/ProjectSignature-13.jpg", "img/portfolio/campaign/ProjectSignature/ProjectSignature-14.jpg", "img/portfolio/campaign/ProjectSignature/ProjectSignature-15.jpg", "img/portfolio/campaign/ProjectSignature/ProjectSignature-16.jpg", "img/portfolio/campaign/ProjectSignature/ProjectSignature-17.jpg"],
    title: "Project Signature",
    caption: "",
    kind: "Campaign"
  },

  {
    thumb: "img/portfolio/thumbs/misc/RR_GrandOpening.jpg",
    lightbox: ["img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-16.jpg", "img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-17.jpg", "img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-18.jpg", "img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-19.jpg", "img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-20.jpg", "img/portfolio/misc/RR_GrandOpening/RR_GrandOpening-21.jpg"],
    title: "Round Rock Grand Opening",
    caption: "",
    kind: "Misc"
  },

  {
    thumb: "img/portfolio/thumbs/print/Invites.jpg",
    lightbox: ["img/portfolio/print/Invites/Invites-40.jpg", "img/portfolio/print/Invites/Invites-41.gif", "img/portfolio/print/Invites/Invites-42.jpg", "img/portfolio/print/Invites/Invites-43.jpg", "img/portfolio/print/Invites/Invites-44.jpg", "img/portfolio/print/Invites/Invites-45.jpg"],
    title: "Event Cards",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/misc/Logos.gif",
    lightbox: ["img/portfolio/misc/Logos/Logos-22.jpg", "img/portfolio/misc/Logos/Logos-23.jpg", "img/portfolio/misc/Logos/Logos-24.jpg", "img/portfolio/misc/Logos/Logos-25.jpg", "img/portfolio/misc/Logos/Logos-26.jpg", "img/portfolio/misc/Logos/Logos-27.jpg", "img/portfolio/misc/Logos/Logos-28.jpg"],
    title: "Logos & Graphics",
    caption: "",
    kind: "Misc"
  },

  {
    thumb: "img/portfolio/thumbs/print/CoreProducts2015.jpg",
    lightbox: ["img/portfolio/print/CoreProducts2015/CoreProducts2015-15.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-16.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-17.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-18.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-19.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-20.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-21.jpg", "img/portfolio/print/CoreProducts2015/CoreProducts2015-22.jpg"],
    title: "2015 Core Products Catalog",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/print/HardwareInnovationsBro.gif",
    lightbox: ["img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-29.jpg", "img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-30.jpg", "img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-31.jpg", "img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-32.jpg", "img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-33.jpg", "img/portfolio/print/HardwareInnovationsBro/HardwareInnovationsBro-34.jpg"],
    title: "Hardware Innovations Brochure",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/develop/CorporatePPT.jpg",
    lightbox: ["img/portfolio/develop/CorporatePPT/CorporatePPT-18.jpg", "img/portfolio/develop/CorporatePPT/CorporatePPT-19.jpg", "img/portfolio/develop/CorporatePPT/CorporatePPT-20.jpg", "img/portfolio/develop/CorporatePPT/CorporatePPT-21.jpg", "img/portfolio/develop/CorporatePPT/CorporatePPT-22.jpg"],
    title: "Corporate PowerPoint",
    caption: "",
    kind: "Develop"
  },

  {
    thumb: "img/portfolio/thumbs/print/Ads.jpg",
    lightbox: ["img/portfolio/print/Ads/Ads-35.jpg", "img/portfolio/print/Ads/Ads-36.jpg", "img/portfolio/print/Ads/Ads-37.jpg", "img/portfolio/print/Ads/Ads-38.jpg", "img/portfolio/print/Ads/Ads-39.jpg"],
    title: "Print Ads",
    caption: "",
    kind: "Print"
  },

  {
    thumb: "img/portfolio/thumbs/develop/HolidayCard.jpg",
    lightbox: ["img/portfolio/develop/HolidayCard/Holiday_Card_2018.gif"],
    title: "Holiday Card",
    caption: "",
    kind: "Develop"
  },

  {
    thumb: "img/portfolio/thumbs/misc/CH_TrainingRoom.jpg",
    lightbox: ["img/portfolio/misc/CA_TrainingRoom/CA_TrainingRoom-12.jpg", "img/portfolio/misc/CA_TrainingRoom/CA_TrainingRoom-13.jpg", "img/portfolio/misc/CA_TrainingRoom/CA_TrainingRoom-14.jpg", "img/portfolio/misc/CA_TrainingRoom/CA_TrainingRoom-15.jpg"],
    title: "Chatsworth, CA Training Room",
    caption: "",
    kind: "Misc"
  },

  {
    thumb: "img/portfolio/thumbs/develop/WebBanners.jpg",
    lightbox: ["img/portfolio/develop/WebBanners/WebBanners-28.jpg", "img/portfolio/develop/WebBanners/WebBanners-29.jpg", "img/portfolio/develop/WebBanners/WebBanners-30.jpg", "img/portfolio/develop/WebBanners/WebBanners-31.jpg"],
    title: "Web Banners",
    caption: "",
    kind: "Develop"
  },

  {
    thumb: "img/portfolio/thumbs/misc/ApplianceGraphics.jpg",
    lightbox: ["img/portfolio/misc/ApplianceGraphics/ApplianceGraphics-29.jpg", "img/portfolio/misc/ApplianceGraphics/ApplianceGraphics-30.jpg"],
    title: "Appliance Graphics",
    caption: "",
    kind: "Misc"
  }
];

//Sort the Gallery
developUpdate = [];
printUpdate = [];
campaignUpdate = [];
miscUpdate = [];

function gallerySortDevelop() {
  for(prop in portfolio) {
    if(portfolio[prop].kind === "Develop") {
      developUpdate.push(portfolio[prop]);
    }
  }
}

function gallerySortPrint() {
  for(prop in portfolio) {
    if(portfolio[prop].kind === "Print") {
      printUpdate.push(portfolio[prop]);
    }
  }
}

function gallerySortCampaign() {
  for(prop in portfolio) {
    if(portfolio[prop].kind === "Campaign") {
      campaignUpdate.push(portfolio[prop]);
    }
  }
}

function gallerySortMisc() {
  for(prop in portfolio) {
    if(portfolio[prop].kind === "Misc") {
      miscUpdate.push(portfolio[prop]);
    }
  }
}

// put sorted array items on page
function galleryPageContent (items) {
  $.each(items, function(i, portfolio) {
    galleryContent = '<div class="galleryIMG popup_open" index="' + i + '" rel="' + portfolio.kind +'"><img src="' + portfolio.thumb + '" alt="' + portfolio.title + '"><div class="overlay"><div class="text">' + portfolio.title + '</div></div></div>';
    $("#portfolioWork").append(galleryContent);
  });
}

//Update the Gallery
function updateGallery(sortedArray, length) {
  if (sortedArray.length <= 6) {
    galleryPageContent(sortedArray);
  } else {
    // new array of sorted gallery items to display at one time
    var sliced = [];
    for (var i=0; i<length; i++)
        sliced[i] = sortedArray[i];
    // put paired down items on page
    galleryPageContent(sliced);

    // Make loadMore link and put on page
    if (portfolio.length > length) {
      var loadMoreLink = '<a onclick="loadMore()" href="javascript:void(0);" id="loadMore" index="6">Load More</a>';
      $("#portfolioWork").append(loadMoreLink);
      // give link an index attribute of how many items are currently on page
      $('#loadMore').attr("index",length);
    } // end add loadMore link
  } // end if statement
} // End updateGallery

// Load more to All gallery
function loadMore() {
  // find how many items are currently on page and increase by 6
  var index = $('#loadMore').attr('index');
  index = parseInt(index) + 6;
  // reset the gallery with new items
  $("#portfolioWork").empty();
  updateGallery(portfolio, index)
}

//Portfolio links to update gallery
$("#portfolioSectionAll").click(function() {
  $("#portfolioLinksDiv > p.selected").removeClass("selected");
  $(this).addClass("selected");
  $("#portfolioWork").empty();
  updateGallery(portfolio, 6);
});

$("#portfolioSectionCampaign").click(function() {
  $("#portfolioLinksDiv > p.selected").removeClass("selected");
  $(this).addClass("selected");
  $("#portfolioWork").empty();
  updateGallery(campaignUpdate);
});

$("#portfolioSectionDigital").click(function() {
  $("#portfolioLinksDiv > p.selected").removeClass("selected");
  $(this).addClass("selected");
  $("#portfolioWork").empty();
  updateGallery(developUpdate);
});

$("#portfolioSectionPrint").click(function() {
  $("#portfolioLinksDiv > p.selected").removeClass("selected");
  $(this).addClass("selected");
  $("#portfolioWork").empty();
  updateGallery(printUpdate);
});

$("#portfolioSectionMisc").click(function() {
  $("#portfolioLinksDiv > p.selected").removeClass("selected");
  $(this).addClass("selected");
  $("#portfolioWork").empty();
  updateGallery(miscUpdate);
});

//Update popup
function updatePopup(sortedArray, itemClicked) {
  //Empty popupImageDiv
  $('#popupImageDiv').empty();
  //Populate popup with new content
  $('#popupTitle').text(sortedArray[itemClicked].title);
  $('#popupTitle').attr('index', itemClicked);
  $('#popupDescription').text(sortedArray[itemClicked].caption);
  $.each(sortedArray[itemClicked].lightbox, function(i, value) {
    $('#popupImageDiv').append('<img class="popupImage" src=' + value +' />');
  });
}; //End Update popup

// Popup Next button
function popupNext() {
  // get index of item currently on screen and increase by 1
  var index = $('#popupTitle').attr('index');
  index = parseInt(index) + 1;

  if($('#portfolioSectionAll').hasClass('selected') && index < portfolio.length) {
    updatePopup(portfolio, index);
  } else if($('#portfolioSectionAll').hasClass('selected') && index >= portfolio.length) {
    index = 0;
    updatePopup(portfolio, index);
  } else if($('#portfolioSectionCampaign').hasClass('selected') && index < campaignUpdate.length) {
    updatePopup(campaignUpdate, index);
  } else if($('#portfolioSectionCampaign').hasClass('selected') && index >= campaignUpdate.length) {
    index = 0;
    updatePopup(campaignUpdate, index);
  } else if($('#portfolioSectionDigital').hasClass('selected') && index < developUpdate.length) {
    updatePopup(developUpdate, index);
  } else if($('#portfolioSectionDigital').hasClass('selected') && index >= developUpdate.length) {
    index = 0;
    updatePopup(developUpdate, index);
  } else if($('#portfolioSectionPrint').hasClass('selected') && index < printUpdate.length) {
    updatePopup(printUpdate, index);
  } else if($('#portfolioSectionPrint').hasClass('selected') && index >= printUpdate.length) {
    index = 0;
    updatePopup(printUpdate, index);
  } else if($('#portfolioSectionMisc').hasClass('selected') && index < miscUpdate.length) {
    updatePopup(miscUpdate, index);
  } else if($('#portfolioSectionMisc').hasClass('selected') && index >= miscUpdate.length) {
    index = 0;
    updatePopup(miscUpdate, index);
  }
}

// Popup Previous button
function popupPrev() {
  // get index of item currently on screen and increase by 1
  var index = $('#popupTitle').attr('index');
  index = parseInt(index) - 1;

  if($('#portfolioSectionAll').hasClass('selected') && index != -1) {
    updatePopup(portfolio, index);
  } else if($('#portfolioSectionAll').hasClass('selected') && index == -1) {
    index = parseInt(portfolio.length) - 1;
    updatePopup(portfolio, index);
  } else if($('#portfolioSectionCampaign').hasClass('selected') && index != -1) {
    updatePopup(campaignUpdate, index);
  } else if($('#portfolioSectionCampaign').hasClass('selected') && index == -1) {
    index = parseInt(campaignUpdate.length) - 1;
    updatePopup(campaignUpdate, index);
  } else if($('#portfolioSectionDigital').hasClass('selected') && index != -1) {
    updatePopup(developUpdate, index);
  } else if($('#portfolioSectionDigital').hasClass('selected') && index == -1) {
    index = parseInt(developUpdate.length) - 1;
    updatePopup(developUpdate, index);
  } else if($('#portfolioSectionPrint').hasClass('selected') && index != -1) {
    updatePopup(printUpdate, index);
  } else if($('#portfolioSectionPrint').hasClass('selected') && index == -1) {
    index = parseInt(printUpdate.length) - 1;
    updatePopup(printUpdate, index);
  } else if($('#portfolioSectionMisc').hasClass('selected') && index != -1) {
    updatePopup(miscUpdate, index);
  } else if($('#portfolioSectionMisc').hasClass('selected') && index == -1) {
    index = parseInt(miscUpdate.length) - 1;
    updatePopup(miscUpdate, index);
  }
}

// set up arrow keys to trigger popupNext and popupPrev
document.addEventListener("keydown", function(event) {
  if(event.which == 39) {
    popupNext();
  } else if(event.which == 37) {
    popupPrev();
  }
})

//Popup options setup
$('#popup').popup({
  closeelement: '.JPO_close',
  transition: 'all 0.3s',
  opacity: '0.65',
  scrolllock: true
});

$(document).ready(function() {
  gallerySortDevelop();
  gallerySortPrint();
  gallerySortCampaign();
  gallerySortMisc();
  updateGallery(portfolio, 6);
  $('body').trigger('click');
});

//Update popup window with selected content
document.addEventListener('click', function() {
  $(".galleryIMG").click(function() {
    //find the index of the item clicked
    var itemClicked = $(this).attr("index");
    //know what list to pull from
    var itemGroup = $(this).attr("rel");
    //Pass to updatePopup function
    if($('#portfolioSectionAll').hasClass('selected')) {
      updatePopup(portfolio, itemClicked);
    } else if (itemGroup === 'Campaign') {
      updatePopup(campaignUpdate, itemClicked);
    } else if (itemGroup === 'Develop') {
      updatePopup(developUpdate, itemClicked);
    } else if (itemGroup === 'Print') {
      updatePopup(printUpdate, itemClicked);
    } else if (itemGroup === 'Misc') {
      updatePopup(miscUpdate, itemClicked);
    };

  });
});
